import{d as X,s as Z,a1 as ee,q as te,r as d,b as N,t as ae,w as z,Y as R,j as n,i as u,u as t,_ as le,a2 as se,v as s,x as o,W as ne,a7 as p,a8 as ue,K as re,a9 as oe,z as S,aa as U,ab as F,ac as P,R as f,ad as ie,o as D,a3 as ce,O as w,A as T,C as c,ae as L,M as g,a4 as me,af as de,ag as be,ah as pe,a5 as ge,a6 as I,g as ve}from"./vendor-DCUXqmZE.js";import{_ as fe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const he={class:"tags-container"},ye={class:"title-section"},Ne={class:"card-title"},we={class:"search-section"},ke={key:0,class:"search-tip"},_e=X({__name:"index",setup(Te){ve(l=>({ece6c41e:t(b)?"rgba(255, 255, 255, 0.06)":"rgba(59, 130, 246, 0.05)","126acb52":t(b)?"rgba(255, 255, 255, 0.1)":"rgba(59, 130, 246, 0.1)","3aee6343":t(b)?"rgba(255, 255, 255, 0.1)":"rgba(59, 130, 246, 0.08)",27539754:t(b)?"rgba(255, 255, 255, 0.2)":"rgba(59, 130, 246, 0.2)","5129db7c":t(b)?"#9ca3af":"#3b82f6",bd606ae0:t(b)?"#9ca3af":"#64748b"}));const h=ae(),{t:e,locale:M}=Z(),k=ee(),b=te("isDarkMode",d(!1)),$=N(()=>{switch(h.name){case"hayes-tags":return e("menu.hayesFarm");case"t1005-tags":return e("menu.t1005Farm");case"p2-tags":return e("menu.p2Farm");default:return""}}),A=[{label:e("table.columnTypes.text"),value:"text"},{label:e("table.columnTypes.number"),value:"number"},{label:e("table.columnTypes.date"),value:"date"},{label:e("table.columnTypes.select"),value:"select"}],y=d(!1),x=d(),m=d({title:"",type:"text"}),q={title:{required:!0,message:e("table.pleaseInputColumnName"),trigger:"blur"},type:{required:!0,message:e("table.pleaseSelectColumnType"),trigger:"change"}},C=d([{title:e("table.name"),key:"name",type:"text"},{title:e("table.cardNumber"),key:"cardNumber",type:"text"},{title:e("table.greenhouseNumber"),key:"greenhouseNumber",type:"text"},{title:e("table.tagNumber"),key:"tagNumber",type:"text"},{title:e("table.status"),key:"status",type:"select"},{title:e("table.floweringTime"),key:"floweringTime",type:"date"},{title:e("table.harvestTime"),key:"harvestTime",type:"date"}]),_=l=>{switch(l){case"hayes-tags":return"HAYES";case"t1005-tags":return"T1005";case"p2-tags":return"P2";default:return"FARM"}},B=()=>{const a=`${_(h.name)}-`;return{id:Date.now(),name:"",cardNumber:"",greenhouseNumber:"",tagNumber:a,status:"growing",floweringTime:null,harvestTime:null}},j=N(()=>[{label:e("status.growing"),value:"growing"},{label:e("status.flowering"),value:"flowering"},{label:e("status.harvested"),value:"harvested"},{label:e("status.cleaned"),value:"cleaned"}]),E=()=>[{title:e("table.name"),key:"name",render:l=>s("div",{class:"column-with-icon"},[s(o,{size:18},{default:()=>s(ne)}),s(p,{value:l.name,onUpdateValue:a=>{l.name=a},class:"input-with-icon"})])},{title:e("table.cardNumber"),key:"cardNumber",render:l=>s("div",{class:"column-with-icon"},[s(o,{size:18},{default:()=>s(ue)}),s(p,{value:l.cardNumber,onUpdateValue:a=>{l.cardNumber=a},class:"input-with-icon"})])},{title:e("table.greenhouseNumber"),key:"greenhouseNumber",render:l=>s("div",{class:"column-with-icon"},[s(o,{size:18},{default:()=>s(re)}),s(p,{value:l.greenhouseNumber,onUpdateValue:a=>{l.greenhouseNumber=a},class:"input-with-icon"})])},{title:e("table.tagNumber"),key:"tagNumber",render:l=>s("div",{class:"column-with-icon"},[s(o,{size:18},{default:()=>s(oe)}),s(p,{value:l.tagNumber,onUpdateValue:a=>{const r=_(h.name);a.startsWith(`${r}-`)||(a=`${r}-${a.replace(`${r}-`,"")}`),l.tagNumber=a},placeholder:e("table.tagNumberPlaceholder"),class:"input-with-icon"})])},{title:e("table.status"),key:"status",render:l=>s("div",{class:"column-with-icon"},[s(o,{size:18},{default:()=>s(S)}),s(U,{value:l.status,options:j.value,onUpdateValue:a=>{l.status=a},class:"select-with-icon"})])},{title:e("table.floweringTime"),key:"floweringTime",render:l=>s("div",{class:"column-with-icon"},[s(o,{size:18},{default:()=>s(F)}),s(P,{value:l.floweringTime,type:"date",onUpdateValue:a=>{l.floweringTime=a},class:"date-picker-with-icon"})])},{title:e("table.harvestTime"),key:"harvestTime",render:l=>s("div",{class:"column-with-icon"},[s(o,{size:18},{default:()=>s(F)}),s(P,{value:l.harvestTime,type:"date",onUpdateValue:a=>{l.harvestTime=a},class:"date-picker-with-icon"})])},{title:e("table.actions"),key:"actions",render:l=>s(f,{size:"small",type:"error",onClick:()=>Y(l),class:"delete-button"},{default:()=>e("common.delete"),icon:()=>s(o,null,{default:()=>s(ie)})})}],H=N(()=>E()),i=d([]),W={pageSize:10},O=()=>{i.value.push(B())},Y=l=>{const a=i.value.findIndex(r=>r.id===l.id);a!==-1&&i.value.splice(a,1)},K=()=>{var l;(l=x.value)==null||l.validate(a=>{if(!a){const r=m.value.title.toLowerCase().replace(/\s+/g,"_");C.value.push({title:m.value.title,key:r,type:m.value.type}),i.value.forEach(Q=>{Q[r]=null}),y.value=!1,m.value={title:"",type:"text"},k.success("添加列成功")}})},G=()=>{if(i.value.filter(a=>!a.name||!a.cardNumber||!a.greenhouseNumber||!a.tagNumber).length>0){k.error("请填写完整的信息（名字、卡号、棚号、标签号为必填项）");return}k.success("保存成功")},v=d(""),V=N(()=>{if(!v.value)return i.value;const l=v.value.toLowerCase();return i.value.filter(a=>a.name.toLowerCase().includes(l)||a.cardNumber.toLowerCase().includes(l)||a.greenhouseNumber.toLowerCase().includes(l)||a.tagNumber.toLowerCase().includes(l)||a.status.toLowerCase().includes(l))}),J=l=>"table-row";return i.value.length===0&&O(),z(()=>h.name,l=>{if(i.value.length>0){const a=_(l);i.value=i.value.map(r=>({...r,tagNumber:`${a}-${r.tagNumber.split("-")[1]||""}`}))}},{immediate:!0}),z(M,()=>{C.value=[{title:e("table.name"),key:"name",type:"text"},{title:e("table.cardNumber"),key:"cardNumber",type:"text"},{title:e("table.greenhouseNumber"),key:"greenhouseNumber",type:"text"},{title:e("table.tagNumber"),key:"tagNumber",type:"text"},{title:e("table.status"),key:"status",type:"select"},{title:e("table.floweringTime"),key:"floweringTime",type:"date"},{title:e("table.harvestTime"),key:"harvestTime",type:"date"}]}),(l,a)=>(D(),R("div",he,[n(t(le),{class:"table-card"},{header:u(()=>[n(t(w),{vertical:""},{default:u(()=>[n(t(w),{justify:"space-between",align:"center"},{default:u(()=>[T("div",ye,[n(t(o),{size:"24",class:"title-icon"},{default:u(()=>[n(t(S))]),_:1}),T("span",Ne,c($.value)+c(t(e)("menu.tagManagement")),1)]),n(t(w),null,{default:u(()=>[n(t(L),{trigger:"hover"},{trigger:u(()=>[n(t(f),{onClick:O,type:"primary",class:"action-button"},{icon:u(()=>[n(t(o),null,{default:u(()=>[n(t(me))]),_:1})]),default:u(()=>[g(" "+c(t(e)("common.add")),1)]),_:1})]),default:u(()=>[g(" "+c(t(e)("common.add")),1)]),_:1}),n(t(L),{trigger:"hover"},{trigger:u(()=>[n(t(f),{onClick:G,type:"success",class:"action-button"},{icon:u(()=>[n(t(o),null,{default:u(()=>[n(t(de))]),_:1})]),default:u(()=>[g(" "+c(t(e)("common.save")),1)]),_:1})]),default:u(()=>[g(" "+c(t(e)("common.save")),1)]),_:1})]),_:1})]),_:1}),T("div",we,[n(t(p),{value:v.value,"onUpdate:value":a[0]||(a[0]=r=>v.value=r),placeholder:t(e)("common.search"),clearable:"",class:"search-input"},{prefix:u(()=>[n(t(o),null,{default:u(()=>[n(t(pe))]),_:1})]),_:1},8,["value","placeholder"]),v.value?(D(),R("div",ke,c(t(e)("common.found"))+" "+c(V.value.length)+" "+c(t(e)("common.records")),1)):be("",!0)])]),_:1})]),default:u(()=>[n(t(ce),{columns:H.value,data:V.value,pagination:W,bordered:!0,class:"data-table","row-class-name":J},null,8,["columns","data"])]),_:1}),n(t(se),{show:y.value,"onUpdate:show":a[4]||(a[4]=r=>y.value=r),preset:"dialog",title:t(e)("table.addColumn")},{action:u(()=>[n(t(w),null,{default:u(()=>[n(t(f),{onClick:a[3]||(a[3]=r=>y.value=!1)},{default:u(()=>[g(c(t(e)("common.cancel")),1)]),_:1}),n(t(f),{type:"primary",onClick:K},{default:u(()=>[g(c(t(e)("common.confirm")),1)]),_:1})]),_:1})]),default:u(()=>[n(t(ge),{ref_key:"columnFormRef",ref:x,model:m.value,rules:q,"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging"},{default:u(()=>[n(t(I),{label:t(e)("table.columnName"),path:"title"},{default:u(()=>[n(t(p),{value:m.value.title,"onUpdate:value":a[1]||(a[1]=r=>m.value.title=r),placeholder:t(e)("table.pleaseInputColumnName")},null,8,["value","placeholder"])]),_:1},8,["label"]),n(t(I),{label:t(e)("table.columnType"),path:"type"},{default:u(()=>[n(t(U),{value:m.value.type,"onUpdate:value":a[2]||(a[2]=r=>m.value.type=r),options:A,placeholder:t(e)("table.pleaseSelectColumnType")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","title"])]))}}),Oe=fe(_e,[["__scopeId","data-v-cd5f09c6"]]);export{Oe as default};
